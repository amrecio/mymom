How to build a FreeCol release


* Make sure that all relevant changes have been committed to the
  branch you are about to release. In particular, remember to merge
  translations from trunk if the release is not made from trunk.

* Create a copy of the branch you want to release in the tags
  folder. Subversion does not distinguish between tags and
  branches. Example:

  svn copy -m "Creating tag for release 0.9.0-alpha2." \
  https://freecol.svn.sourceforge.net/svnroot/freecol/freecol/branches/0.9.x \
  https://freecol.svn.sourceforge.net/svnroot/freecol/freecol/tags/0.9.0-alpha2

* Check out the newly created branch and do all further work in that
  new branch.

* Change the FREECOL_VERSION constant to match the release version in
  FreeCol.java and commit the change. Start a clean compile, run all
  tests and verify the specification(s). You can do that by calling
  "ant prepare-commit".

* Call "ant dist" in order to build all packages. It might be
  necessary to increase the memory available for ant, for example by
  setting the environment variable ANT_OPTS="-Xms256m -Xmx256m".

* Install one of the generated packages and verify that you can play
  normally for at least five turns. Other good tests include loading a
  saved game and running the game in debug mode for a hundred turns or
  so. It might also be a good idea to compile the game from one of the
  source packages.

* Upload the packages to sftp://frs.sourceforge.net/ and ensure that
  all packages get uploaded. You can use a script similar to this:

  #!/bin/sh

  FREECOL_VERSION=0.9.0-alpha2
  PREFIX=freecol-$FREECOL_VERSION
  USERNAME=myUserName

  sftp $USERNAME,freecol@frs.sourceforge.net <<FILE
  cd /home/frs/project/f/fr/freecol/freecol
  mkdir $PREFIX
  cd $PREFIX
  put $PREFIX-installer.exe
  put $PREFIX-installer.jar
  put $PREFIX-installer-with-sources.jar
  put $PREFIX-mac.tar.bz2
  put $PREFIX-src.tar.gz
  put $PREFIX-src.zip
  put $PREFIX.tar.gz
  put $PREFIX.zip
  exit
  FILE

* Compile the feature list for the news announcement (use the tracker
  and/or run the previous version for comparison).

* Update the release number in the "Version"-mambot.
  (http://www.freecol.org/administrator > Mambots > Site Mambots >
  Version)

* Publish/unpublish "Download Unstable Version" (this page should only
  be displayed if the unstable version is the latest release).

* Add a news item to our website.

* Remove the download button from the previous release news item.

* Post release messages on our mailing lists: developers, translators
  and users.


The following items can be omitted for unstable releases:

* Trackers: Rename the group "Added (Trunk)"/"Added (x.y,z-branch)" to
  Added (FreeCol x.y.z). Rename the group "Fixed (x.y,z-branch)"/
  "Fixed (Trunk)" to Fixed (FreeCol x.y.z). Create new groups with the
  names you just renamed from. Change the links on "Tracker > Admin >
  Bugs/Feature... > Preferences". Add redirects for "bugtracker/x.y.z"
  and "featuretracker/x.y.z". Create a new group for "In 0.y.x".

* Update JavaDoc and User Documentation on freecol.org


The following items should be omitted for unstable releases:

* Update the links to "Added (0.x.y-branch)" and "Fixed
  (0.x.y-branch)" on the roadmap (and release status etc).

* Post a news item on SF.net

* Create news items at Linuxgames.com, linux-gamers.com and
  happypenguin.org
